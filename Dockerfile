# Этот этап собирает приложение
FROM golang:1.17-alpine as builder

WORKDIR /app



# Копируем все остальные файлы
COPY . .

# Собираем приложение
RUN go build -o app

# Этот этап собирает конечный образ
FROM alpine:latest

WORKDIR /app

# Копируем исполняемый файл из предыдущего этапа
COPY --from=builder /app/app .

# Указываем порт, который будет прослушивать приложение
EXPOSE 8080

# Команда для запуска приложения при старте контейнера
CMD ["./app"]
